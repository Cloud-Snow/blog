<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">
  
  <link rel="stylesheet" href="/blog/lib/animate-css/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"rcore-os.github.io","root":"/blog/","scheme":"Muse","version":"8.0.0-rc.4","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="rcore-os Blog">
<meta property="og:url" content="http://rcore-os.github.io/blog/index.html">
<meta property="og:site_name" content="rcore-os Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="rcore-os Group">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://rcore-os.github.io/blog/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>rcore-os Blog</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <main class="main">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line toggle-line-first"></span>
        <span class="toggle-line toggle-line-middle"></span>
        <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">rcore-os Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">rcore-os Group</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">468</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">454</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </section>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </header>

      
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div id="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


      <div class="main-inner">
        

        <div class="content index posts-expand">
          
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://rcore-os.github.io/blog/2024/11/09/rcore-step12-lcr/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="rcore-os Group">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rcore-os Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2024/11/09/rcore-step12-lcr/" class="post-title-link" itemprop="url">rcore-step12-lcr</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2024-11-09 20:07:41 / Modified: 15:54:56" itemprop="dateCreated datePublished" datetime="2024-11-09T20:07:41+00:00">2024-11-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>第一阶段：rustlings<br>1.去入门了一下rust，使用的是Rust语言圣经(Rust Course)<br>2.通过学习Rust语言圣经，了解了rust的基础语法，因为之前有过C++语言基础，所以学习较为容易<br>3.无GC，有强大的包管理工具，强大的安全性，以及独具特色的所有权机制<br>4.学习了rustlings的110道题目，虽然之后大多用不到就全忘记了，但是如果将来从事相关工作，很快就能重新捡起来<br>5.学习完成rustlings的110道题目之后就开始了之后的第二阶段学习</p>
<p>第二阶段：rCore-Tutorial<br>1.通过阅读rCore-Tutorial-Book学习到了很多关于操作系统的知识，之前也有过操作系统的学习，只不过都是理论上的，并没有相关实践上的学习，这也是我进入此训练营的原因，想通过训练营督促自己去学习到更多的关于操作系统的知识，以及拥有一个比较独特的项目，去助力就业<br>2.通过rCore的学习，完成了5个lab，可以说是学习比较辛苦的了，是rCore-Tutorial-Book和rCore-Camp-Guide-2024A两个教程同时跟进，学习完成rCore-Tutorial-Book之后就在相应章节的2024A中完成lab，<br>(1)在lab1中，我们的系统已经能够支持多个任务分时轮流运行，引入一个新的系统调用 sys_task_info 以获取当前任务的信息。<br>(2)在lab2中，在引入虚存之后重写内核的 sys_get_time 和 sys_task_info 函数，以及完成mmap 和 munmap 匿名映射两个系统调用函数。<br>(3)在lab3中，进程创建过程中，fork+execl两个函数高频率连续使用，感觉十分繁琐，我们引入一个spawn函数直接完成两个函数调用的结果，新建子进程，使其执行目标程序。还完成了stride 调度算法的实现，通过修改优先级，使步长不同，导致选取的优先级发生变化。<br>(4)在lab4中，引入硬链接的概念，让我们完成linkat和unlinkat和fstat三个系统调用，写这个的时候给我写破防了，当时看的代码抑郁了，但是其实没有那么难，很多代码其实和解决问题没有任何关联，这一个lab只能是非常难写，需要对源码有很深的理解，以及需要想到在文件存入fd_table的时候，想办法把文件名字也放入PCB中<br>(5)在lab5中，完成了死锁检测，这个我的完成过程也是比较抽象，写的时候很痛苦，一直往银行家算法上面想，后面发现need根本不知道啊，经过讨论之后才知道，原来只需要检测死锁就行，比较精妙的一点就是在lock阻塞或睡眠的过程中，就需要更新need数组，而且在死锁检测时候，需要让need+1而不是allocation，比较有意思吧。<br>3.其实完成了这个比较toy的玩具项目，感觉最后很多东西没有联系起来，如果要是最后把所有lab整合在一起，组合成一个可以展现自己从开始到现在的成果的话会更好一些，不过也是很感谢rCore这个教学，学到了很多操作系统的知识。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://rcore-os.github.io/blog/2024/11/09/2024%E7%A7%8B%E5%86%AC%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93-%E5%88%98%E6%A2%93%E9%99%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="rcore-os Group">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rcore-os Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2024/11/09/2024%E7%A7%8B%E5%86%AC%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93-%E5%88%98%E6%A2%93%E9%99%86/" class="post-title-link" itemprop="url">2024秋冬开源操作系统训练营第一阶段总结-刘梓陆</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2024-11-09 19:05:54 / Modified: 15:54:56" itemprop="dateCreated datePublished" datetime="2024-11-09T19:05:54+00:00">2024-11-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/report/" itemprop="url" rel="index"><span itemprop="name">report</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li><a href="#写在前面">写在前面</a></li>
<li><a href="#欢迎交流-">欢迎交流;-）</a></li>
<li><a href="#背景">背景</a></li>
<li><a href="#问题与挑战">问题与挑战</a></li>
<li><a href="#下一步计划">下一步计划</a></li>
<li><a href="#总结">总结</a></li>
</ul>
<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>我从稍微理解了我的专业之后就一直都很崇拜 Linus，这位堪称传奇的软件工程师在 1991 年 8 月 25 日——他 21 岁时就在网络上发布了 Linux 内核的源代码。现在是 2024 年 4 月 23 日，我也是 21 岁，追逐吗，梦想吗，我也想像他一样写出这样神奇的代码，33 年后的今天，我也要开始了，Linus。</p>
<h2 id="欢迎交流-）"><a href="#欢迎交流-）" class="headerlink" title="欢迎交流;-）"></a>欢迎交流;-）</h2><p>这次参加训练营，也算是二周目，对很多内容都已经轻车熟路。在上次的训练营之中，我并没有完成三阶段的学习，多少有当时实习没有时间进行分配和对更加复杂的操作系统内核架构没有大概了解的原因。</p>
<p>所以在实习结束之后的暑假，我也没有闲着，主要都在学习 Rust 之前没有接触过的内容还有理解 Linux 操作系统内核上了。成果大概就是把《Rust 程序设计第二版》这本书看完了，加上初探了一下 Rust 的异步框架、对 Linux 0.12 这个老版本的内核代码进行了一些阅读。</p>
<p>希望这次可以成功冲击第四阶段，加油！</p>
<ul>
<li>github ID: <a href="https://github.com/destinyFvcker" target="_blank" rel="noopener">destinyFvcker</a></li>
<li>邮箱：<a href="mailto:&#x64;&#101;&#x73;&#116;&#x69;&#110;&#121;&#x66;&#x75;&#x6e;&#107;&#x40;&#49;&#54;&#51;&#x2e;&#x63;&#111;&#x6d;">&#x64;&#101;&#x73;&#116;&#x69;&#110;&#121;&#x66;&#x75;&#x6e;&#107;&#x40;&#49;&#54;&#51;&#x2e;&#x63;&#111;&#x6d;</a></li>
<li>微信号：destinyfvcker</li>
</ul>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>在过去的一年时间里，我开始学习 Rust 语言，并完成了 Rust 官方的 rustlings 练习题。这些练习题主要帮助我熟悉了 Rust 的基本语法和特性，如所有权、借用、模式匹配等。通过这些基础知识的积累，我对 Rust 的语法和一些核心概念有了初步理解。</p>
<h2 id="问题与挑战"><a href="#问题与挑战" class="headerlink" title="问题与挑战"></a>问题与挑战</h2><p>尽管 rustlings 帮助我打下了基础，但在尝试编写算法和更复杂的数据结构时，还是遇到了不少困难。例如，在实现动态规划、递归和一些复杂数据结构时，感觉自己对于 Rust 的所有权、生命周期、以及内存管理的理解不够深刻。这让我在面对更复杂的算法实现时，仍然感到束手无策。</p>
<h2 id="下一步计划"><a href="#下一步计划" class="headerlink" title="下一步计划"></a>下一步计划</h2><p>为了解决上述问题，我计划进一步提升自己的 Rust 算法编程能力。具体来说，我会在 LeetCode 等平台上使用 Rust 进行算法题目的练习，以巩固对语言特性的理解，并适应使用 Rust 实现高效的算法。通过逐步解决不同难度的算法问题，相信自己能更好地掌握 Rust 的特性和应用。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Rust 是一门极具潜力的系统级编程语言，其独特的内存安全机制和高性能特性值得深入学习。尽管当前在编写算法时遇到了一些困难，但相信通过不断的练习，尤其是在 LeetCode 上的算法刷题，我可以进一步提升自己在实际应用中使用 Rust 的能力。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://rcore-os.github.io/blog/2024/11/09/2024%E7%A7%8B%E5%86%AC%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93-%E5%88%98%E6%A2%93%E9%99%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="rcore-os Group">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rcore-os Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2024/11/09/2024%E7%A7%8B%E5%86%AC%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93-%E5%88%98%E6%A2%93%E9%99%86/" class="post-title-link" itemprop="url">2024秋冬开源操作系统训练营第二阶段总结-刘梓陆</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2024-11-09 19:03:47 / Modified: 15:54:56" itemprop="dateCreated datePublished" datetime="2024-11-09T19:03:47+00:00">2024-11-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/report/" itemprop="url" rel="index"><span itemprop="name">report</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li><a href="#写在前面">写在前面</a></li>
<li><a href="#欢迎交流-">欢迎交流;-）</a></li>
<li><a href="#内存管理">内存管理</a></li>
<li><a href="#更加高级的内容">更加高级的内容</a></li>
</ul>
<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>我从稍微理解了我的专业之后就一直都很崇拜 Linus，这位堪称传奇的软件工程师在 1991 年 8 月 25 日——他 21 岁时就在网络上发布了 Linux 内核的源代码。现在是 2024 年 4 月 23 日，我也是 21 岁，追逐吗，梦想吗，我也想像他一样写出这样神奇的代码，33 年后的今天，我也要开始了，Linus。</p>
<h2 id="欢迎交流-）"><a href="#欢迎交流-）" class="headerlink" title="欢迎交流;-）"></a>欢迎交流;-）</h2><p>这次参加训练营，也算是二周目，对很多内容都已经轻车熟路。在上次的训练营之中，我并没有完成三阶段的学习，多少有当时实习没有时间进行分配和对更加复杂的操作系统内核架构没有大概了解的原因。</p>
<p>所以在实习结束之后的暑假，我也没有闲着，主要都在学习 Rust 之前没有接触过的内容还有理解 Linux 操作系统内核上了。成果大概就是把《Rust 程序设计第二版》这本书看完了，加上初探了一下 Rust 的异步框架、对 Linux 0.12 这个老版本的内核代码进行了一些阅读。</p>
<p>希望这次可以成功冲击第四阶段，加油！</p>
<ul>
<li>github ID: <a href="https://github.com/destinyFvcker" target="_blank" rel="noopener">destinyFvcker</a></li>
<li>邮箱：<a href="mailto:&#100;&#x65;&#115;&#x74;&#x69;&#110;&#121;&#x66;&#117;&#110;&#x6b;&#x40;&#49;&#x36;&#x33;&#46;&#x63;&#x6f;&#x6d;">&#100;&#x65;&#115;&#x74;&#x69;&#110;&#121;&#x66;&#117;&#110;&#x6b;&#x40;&#49;&#x36;&#x33;&#46;&#x63;&#x6f;&#x6d;</a></li>
<li>微信号：destinyfvcker</li>
</ul>
<h2 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h2><p>在二周目的学习之中，我重点学习了 rCore 内存模块关于内存管理的这部分内容，这部分内容在一周目里面可是给我吃了不少苦头，从 ch3 到 ch4 的难度跨度确实有些大，并且 ch4 之中的内容基本上就是后续内容的基石。这部分内容还是看得越懂越好，我越看越觉得当初这些人是怎么想出来这个方案来实现内存地址空间管理的，而且这还是没有实现页置换（顺带一提，这是 Linux 当年的大杀器）和<strong>cow</strong>。说实话这部分的内容 Linus 当年也是调试到吐。</p>
<p>从物理地址、虚拟地址和物理页号、虚拟页号的初级表示到页目录项、页表对内存的统一管理再到<code>MemoryArea</code>和<code>MemorySet</code>实现对一个进程的内存地址空间的高级表示，确实很精彩。</p>
<h2 id="更加高级的内容"><a href="#更加高级的内容" class="headerlink" title="更加高级的内容"></a>更加高级的内容</h2><p>后面的内容，包括文件系统、进程间通信和 I/O 重定向、和并发的复杂性实际上更上一层楼，所以 rcore 可以去繁从简，用几篇文档的篇幅就带我们对这些操作系统的重要抽象有一个大概的概念也实在不容易。就实验要完成的测例来说，感觉也是简化的副作用吧，有点“面向结果编程”的感觉，这个时候就要考验程序员对自己的要求了：只通过测例完全不够，还需要理解这部分的内容。</p>
<p>其实还想要写很多，但是“我有一个对这个命题的十分美妙的证明，这里空白太小，写不下。”，哈哈，期待第三阶段和 ArceOS 擦出的火花。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://rcore-os.github.io/blog/2024/11/09/2024-%E7%A7%8B%E5%86%AC%E5%AD%A3%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%B8%80%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93-%E9%99%88%E6%A0%A9%E6%B0%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="rcore-os Group">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rcore-os Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2024/11/09/2024-%E7%A7%8B%E5%86%AC%E5%AD%A3%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%B8%80%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93-%E9%99%88%E6%A0%A9%E6%B0%91/" class="post-title-link" itemprop="url">2024-秋冬季开源操作系统训练营第一二阶段总结-陈栩民</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2024-11-09 18:53:04 / Modified: 15:54:55" itemprop="dateCreated datePublished" datetime="2024-11-09T18:53:04+00:00">2024-11-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/2024%E7%A7%8B%E5%86%AC%E5%AD%A3%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5/" itemprop="url" rel="index"><span itemprop="name">2024秋冬季开源操作系统训练营</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>我是来自华中科技大学计算机科学与技术专业的一名本科生，课堂上做过类似的操作系统实验，但当时忙于其他事情，只是草草应付了事，所以想趁着这个机会，重新详细认识一下操作系统的基本逻辑，也学习一下rust这门语言。</p>
<h1 id="第一阶段"><a href="#第一阶段" class="headerlink" title="第一阶段"></a>第一阶段</h1><p>主要参考资料：<a href="https://course.rs/basic/intro.html" target="_blank" rel="noopener">https://course.rs/basic/intro.html</a></p>
<p>之前日常学习都是c和c++写得多，习惯了各种指针等非常自由的操作，遇到rust确实非常不适应，感觉编译器时时刻刻都要和我作对，我明明知道这么写没问题，但编译器就是不让。<br>但是随着我对于所有权、借用引用、生命周期这些核心概念的了解，慢慢我也体会到了rust这种“安全编程”带来的好处（后面写操作系统实验时，也比之前课堂上用c写bug少了很多）。<br>此外，“万物皆是模式匹配”的思想，也让整个编程风格看起来优雅了许多。</p>
<h1 id="第二阶段"><a href="#第二阶段" class="headerlink" title="第二阶段"></a>第二阶段</h1><h2 id="Lab-1"><a href="#Lab-1" class="headerlink" title="Lab 1"></a>Lab 1</h2><p>一开始接触这个系统，主要还是不太了解rust的rs文件之间是如何包含的，在引用一个外部模块时，实际上这个查询路径是怎样的。</p>
<p>如果是在c语言中，就是很自然地，只要有对应的PATH环境变量，根据对应的相对路径去include就可以了，但在rust里面，是通过各个目录下一个名为mod.rs的文件去形成一个文件树的，各种文件以什么程度可见，都由mod.rs控制。</p>
<p>具体见：<a href="https://skyao.io/learning-rust/docs/build/module/rust-module-system-explanation/" target="_blank" rel="noopener">https://skyao.io/learning-rust/docs/build/module/rust-module-system-explanation/</a></p>
<p>核心在于这句话：</p>
<p>当执行mod my_module;则编译器可以在同一目录下寻找到 my_module.rs 或 my_module/mod.rs 。</p>
<h2 id="Lab2"><a href="#Lab2" class="headerlink" title="Lab2"></a>Lab2</h2><p>在这个实验被一个小问题卡了很久。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> start: <span class="built_in">usize</span> = <span class="number">0x10000000</span>;</span><br><span class="line"><span class="keyword">let</span> len: <span class="built_in">usize</span> = <span class="number">4096</span>;</span><br><span class="line"><span class="keyword">let</span> prot: <span class="built_in">usize</span> = <span class="number">3</span>;</span><br><span class="line"><span class="built_in">assert_eq!</span>(<span class="number">0</span>, mmap(start, len, prot));</span><br><span class="line"><span class="built_in">assert_eq!</span>(mmap(start + len, len * <span class="number">2</span>, prot), <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>上面的代码会在第二个mmap是触发如下错误：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pte = <span class="keyword">self</span>.page_table.find_pte(start);</span><br><span class="line"><span class="keyword">if</span> pte.is_some() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"conflict_vpn: &#123;:?&#125;"</span>, start);</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当时百思不得其解，自己造了一些其他测试，发现下面这样的操作居然不会报错：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> start: <span class="built_in">usize</span> = <span class="number">0x10000000</span>;</span><br><span class="line"><span class="keyword">let</span> len: <span class="built_in">usize</span> = <span class="number">4096</span>;</span><br><span class="line"><span class="keyword">let</span> prot: <span class="built_in">usize</span> = <span class="number">3</span>;</span><br><span class="line"><span class="built_in">assert_eq!</span>(<span class="number">0</span>, mmap(start - len, len, prot));</span><br><span class="line"><span class="built_in">assert_eq!</span>(mmap(start, len * <span class="number">2</span>, prot), <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>这两个测试有什么区别，我仔细思考了一下虚拟地址转换为物理地址的过程，怎么使用多级页表一步步得到最终的物理页，结合这个如此“整数”的start，我发现了它们的区别很有可能在于，第二个测试，两个请求会处在不同的子页表中，而第一个测试则都在同一个子页表。因此，我终于开始详细看find_pte的流程，发现它是只要找到对应页表项就会返回，不会判断该页表项是否Valid。</p>
<p>那么此时，如果某个子页表已经分配，只是对应页表项不Valid，那么conflict的判断就会失误。</p>
<p>这个故事告诉我们：不要主观臆测一个函数的用途，在使用一个函数之前，一定要确切知道它的输入输出表示什么意思。</p>
<p>此外，也不应该使用find_pte函数，本来这个函数就不是pub的，有一个判断了是否Valid的封装好了的函数供使用。</p>
<h2 id="Lab3"><a href="#Lab3" class="headerlink" title="Lab3"></a>Lab3</h2><p>这个lab挺简单的，就看懂fork和exec的执行逻辑之后，找到那些二者都改了的数据，只执行exec的对应改动，减少无意义的赋值。</p>
<p>stride算法，我使用了一个溢出标记的方法来防止溢出，即计算某个进程的stride值加完之后溢出了，就把该进程标记一下，之后都不考虑调度它，直到所有进程都溢出了。其实这样徒增了很多计算量，问答作业中的方法其实才是比较好的解法:</p>
<p>思想大致如下，没实际运行过，可能有一些细节上的问题：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span> <span class="built_in">PartialOrd</span> <span class="keyword">for</span> Stride &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">partial_cmp</span></span>(&amp;<span class="keyword">self</span>, other: &amp;<span class="keyword">Self</span>) -&gt; <span class="built_in">Option</span>&lt;Ordering&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> a = (<span class="keyword">self</span>.<span class="number">0</span> &amp; <span class="number">0xff</span>) <span class="keyword">as</span> <span class="built_in">u16</span>;</span><br><span class="line">        <span class="keyword">let</span> b = (other.<span class="number">0</span> &amp; <span class="number">0xff</span>) <span class="keyword">as</span> <span class="built_in">u16</span>;</span><br><span class="line">        <span class="keyword">if</span> (a &gt; b &amp;&amp; a &lt; b + <span class="number">255</span> / <span class="number">2</span>) || (a &lt; b &amp;&amp; a + <span class="number">255</span> / <span class="number">2</span>) &lt; b &#123;</span><br><span class="line">            <span class="literal">Some</span>(Ordering::Greater)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="literal">Some</span>(Ordering::Less)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Lab4"><a href="#Lab4" class="headerlink" title="Lab4"></a>Lab4</h2><p>这个实验做的时候遇到很多多重借用的错误，一个比较好的编程习惯是，在函数A调用一个函数B之前，先看看B里面有没有对什么进行了借用，如果有，注意先在调用之前把对应的借用drop掉。</p>
<h2 id="Lab5"><a href="#Lab5" class="headerlink" title="Lab5"></a>Lab5</h2><p>银行家算法，增减数据的时候记住，allocated + remian = all，有bug的时候就多看看这个规则有没有违背。以及记得在获得对应数据之后减need。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这些实验确实都聚焦在了操作系统中基本且核心的问题，而且架构也是循序渐进，让人能够慢慢了解虚拟化、进程线程、文件系统这些都是怎么一步步得来的，感觉受益匪浅。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://rcore-os.github.io/blog/2024/11/09/2024%E5%B9%B4%E7%A7%8B%E5%86%AC%E5%AD%A3%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%B8%80%E3%80%81%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E6%8A%A5%E5%91%8A-sts/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="rcore-os Group">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rcore-os Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2024/11/09/2024%E5%B9%B4%E7%A7%8B%E5%86%AC%E5%AD%A3%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%B8%80%E3%80%81%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E6%8A%A5%E5%91%8A-sts/" class="post-title-link" itemprop="url">2024年秋冬季开源操作系统训练营第一、二阶段总结报告-sts</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2024-11-09 17:23:14 / Modified: 15:54:55" itemprop="dateCreated datePublished" datetime="2024-11-09T17:23:14+00:00">2024-11-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="2024年秋冬季开源操作系统训练营第一、二阶段总结报告"><a href="#2024年秋冬季开源操作系统训练营第一、二阶段总结报告" class="headerlink" title="2024年秋冬季开源操作系统训练营第一、二阶段总结报告"></a>2024年秋冬季开源操作系统训练营第一、二阶段总结报告</h1><p>我个人的话原本这段时间的计划是重新深入学习一下 RUST 语言，通过 RUST 圣经找到的 RUST 官方社区的 QQ 群。刚好在群里看到群友的开源操作系统的邀请，其实时间上对我来说刚刚好，主要原因在于明年暑假可能该找实习了，否则可能不太好找工作。我本人也想通过这个开源来完善自己在开源项目的 PR 上的缺陷，所以，刚刚好，那就坚持到最后吧。</p>
<p>机会总是有的，抓住了还得坚持到底。嗯，就这样。</p>
<h3 id="第一阶段总结"><a href="#第一阶段总结" class="headerlink" title="第一阶段总结"></a>第一阶段总结</h3><p>第一阶段怎么说呢，嗯，不太好总结，之前因为一些机缘巧合看过 RUST 官方社区的教材，所以只有简单了解，也写过教材里的demo。所以，总体上来说，对我难度不大。嗯，也是在一阶段前截止前三天吧开始的，后面每天完成一点。大概这样。对我来说的话 RUST 实现链表那边是真的很难，但是只完成 task 倒还好。</p>
<h3 id="第二阶段总结"><a href="#第二阶段总结" class="headerlink" title="第二阶段总结"></a>第二阶段总结</h3><p>二阶段的话，分不同的章节吧，收获不同。</p>
<p>第三章实验内容的话是taskinfo系统调用的支持。其实实现这个系统调用不难，这边主要的收获是对程序链接有了更深的了解。在linker链接器脚本中指定的符号可以被OS中以外部符号的形式使用，嗯，链接的作用应该是了解更深了。其次，了解更深的地方在于任务切换，一个任务从elf到一个进程，如何构造，如何执行，如何调度，如何进入User模式执行这样，包括一些寄存器SStatus，SEPC，Stvec等等。</p>
<p>第四章的话，mmap和munmap这两个的实现上也没问题。主要收获其实是在于跳板实现的一些细节，最后跳转trap_handler的时候使用jr指令主要原因在于linker脚本链接出来的地址差值和真正跳板代码的虚拟地址位置还有很大差别。所以，不能这么搞，差值还要加上和跳板的距离。</p>
<p>在进程管理里，先前的任务结构体被重新修改为了进程。并且要实现的系统调用也与进程的产生有关系。此外，对stride算法也有了一定的了解。本质上还是进程里添加了一个字段，然后在每次执行进程时都重新处理一次prio字段并更新记录，以决定下一次执行的进程。</p>
<p>进程管理的主要收获在于，task和进程切换的差别。他们差别很大，进程切换要切所有的通用寄存器等等。任务切换切pc，切栈，切被调用者保存寄存器这样，因为调用者保存寄存器在调用schedule的时候已经保存了。然而切换的时候还有被调用者保存寄存器还没保存好。嗯，就是这样。</p>
<p>这里，有个问题就是使用usize的MAX作为大整数，没想到后面会反复调度任务0，后面debug之后才知道要取余这样。</p>
<p>并发的话，就真的太折磨了，银行家算法真的难搞。最后没过测例的原因居然是没实现sys_get_time。太TM离谱了，以后一定好好看任务手册。</p>
<h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p>如果这次没坚持到后面的话，可能后面就真的没机会了。学业上有科研要求，还想去实习，嗯，对我的规划来说，可能到毕业之前没有再来一次的机会了。</p>
<p>一定坚持到最后。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://rcore-os.github.io/blog/2024/11/09/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5rcore%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97-%E8%83%A1%E6%97%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="rcore-os Group">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rcore-os Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2024/11/09/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5rcore%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97-%E8%83%A1%E6%97%AD/" class="post-title-link" itemprop="url">第二阶段rcore学习心得-胡旭</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-09 15:54:56" itemprop="dateCreated datePublished" datetime="2024-11-09T15:54:56+00:00">2024-11-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>这次的学习rcore有点艰辛，因为是把一个操作系统内核给完成了，虽然也只是补充了syscall里面的函数，但是&gt;把整体内核需要什么部件给摸索清楚了<br>出了有关rust语言特殊机制的bug，就看看别的函数是怎么写出规范的rust代码的，虽然看了文档后有个思路去写<br>那个函数，但是不知道怎么写时，参考周围代码就好多了，让我印象比较深的是，当一个结构体的对象要被调用&gt;的时候，比如inner，通常需要加个exclusive_access（）或者unwrap（）等等，这个rust语言虽然没有像C语言&gt;那么底层，但是感觉这么一写，就不会出现内存问题，很规范。再不会通常只能问大佬了哈哈哈。<br>在这个训练营，大佬云集，接触到了很多才学渊博的人，大家也来自不同的专业，有着不同的志向，也坚定了我&gt;跨越专业去学习更多知识的信心。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://rcore-os.github.io/blog/2024/11/09/dream%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="rcore-os Group">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rcore-os Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2024/11/09/dream%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">dream第二阶段总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-09 15:54:56" itemprop="dateCreated datePublished" datetime="2024-11-09T15:54:56+00:00">2024-11-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <hr>
<p>title: dream第二阶段总结<br>date: 2024-05-31 20:00:41<br>categories:<br>    - 2024春夏季开源操作系统训练营<br>tags:<br>    - author:Eternal60f3<br>    - repo:<a href="https://github.com/Eternal60f3/2024-rcore-repo" target="_blank" rel="noopener">https://github.com/Eternal60f3/2024-rcore-repo</a></p>
<hr>
<p>很感谢这次训练营的主办方。我这学期准备考研，然后就也想这弄一个项目。为复试增加点东西。</p>
<p>rcore让我熟悉了gdb以及git的使用。借助vscode的插件也很方便的利用git来比对前后差异来debug。</p>
<p>对于这几个实验。</p>
<p>再看完ch3的文档，当时以为自己理解了，等实际去看代码的时候，发现自己理解个屁。又回到ch2分支，捋清楚ch2的代码之后，才搞懂ch3的实现。</p>
<p>实验4非常nice本来一开始一直没搞懂，为什么要设置 DiskInode 和 Inode 两层抽象，而不是一层，但实际开始写的时候突然意识到，这是对于fs资源保证只有一个人使用的管理。对于涉及到了锁的编程，以前没太写过，debug弄了好久。</p>
<p>实验5在群里和佬们交流了才搞懂该怎么弄，debug了也弄了好久。好在最后做出来了。</p>
<p>可惜，阶段三之后可能没啥时间弄了，得抓数学了。未来说不定还会来参加啦，哈哈哈。多谢清华给了这么好的学习机会</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://rcore-os.github.io/blog/2024/11/09/axsl666-2023%E7%A7%8B%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="rcore-os Group">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rcore-os Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2024/11/09/axsl666-2023%E7%A7%8B%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">axsl666-2023秋第二阶段总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-09 15:54:56" itemprop="dateCreated datePublished" datetime="2024-11-09T15:54:56+00:00">2024-11-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Axsl666-2023秋季OS训练营第二阶段总结"><a href="#Axsl666-2023秋季OS训练营第二阶段总结" class="headerlink" title="Axsl666-2023秋季OS训练营第二阶段总结"></a>Axsl666-2023秋季OS训练营第二阶段总结</h1><p>首先感谢learningOS社区的所有贡献者。前几次训练营因为错过报名时间而未能参加，终于在2023秋季参与到了本次训练营活动。</p>
<h2 id="实验一内容总结"><a href="#实验一内容总结" class="headerlink" title="实验一内容总结"></a>实验一内容总结</h2><p>多任务系统的简单实现</p>
<ul>
<li>扩展 <code>TaskControlBlock</code>：<ul>
<li><code>start_time</code></li>
<li><code>started</code></li>
<li><code>syscall_times</code></li>
</ul>
</li>
<li>设计 <code>TaskManager</code> 的公共接口<ul>
<li><code>add_syscall_times</code></li>
<li><code>get_current_task_info</code></li>
</ul>
</li>
<li>在相应函数中更新 TCB 数据, 记录开始时间：<ul>
<li><code>run_first_task</code></li>
<li><code>run_next_task</code></li>
</ul>
</li>
<li>在系统调用处理函数中调用 <code>add_syscall_times</code> 更新 TCB 中的记录</li>
<li>完成 <code>sys_task_info</code> 系统调用<ul>
<li>主要是调用 <code>get_current_task_info</code> 并返回 <code>TaskInfo</code>。</li>
</ul>
</li>
</ul>
<h2 id="实验二内容总结"><a href="#实验二内容总结" class="headerlink" title="实验二内容总结"></a>实验二内容总结</h2><p>系统开启虚拟地址空间</p>
<h3 id="重写-sys-get-time-和-sys-task-info"><a href="#重写-sys-get-time-和-sys-task-info" class="headerlink" title="重写 sys_get_time 和 sys_task_info"></a>重写 sys_get_time 和 sys_task_info</h3><ul>
<li>在内存管理中增加 translated_mut_ptr 函数，实现进程用户地址空间中的指针到可变引用的转换</li>
<li>其余类似 ch3 中的操作</li>
</ul>
<h3 id="mmap-和-munmap-匿名映射"><a href="#mmap-和-munmap-匿名映射" class="headerlink" title="mmap 和 munmap 匿名映射"></a>mmap 和 munmap 匿名映射</h3><ul>
<li>内存管理接口<ul>
<li>delete_frame_area</li>
</ul>
</li>
<li>任务管理接口<ul>
<li>mmap：调用insert_framed_area增加映射区域</li>
<li>munmap：调用delete_frame_area删除映射区域</li>
</ul>
</li>
<li>系统调用的实现<ul>
<li>合法性检验</li>
<li>调用任务管理接口 mmap 和 munmap</li>
</ul>
</li>
</ul>
<h2 id="实验三内容总结"><a href="#实验三内容总结" class="headerlink" title="实验三内容总结"></a>实验三内容总结</h2><p>实现进程管理相关系统调用</p>
<h3 id="实现系统调用-spawn"><a href="#实现系统调用-spawn" class="headerlink" title="实现系统调用 spawn"></a>实现系统调用 spawn</h3><ul>
<li>扩展 Task 公共接口<ul>
<li>spawn<ul>
<li>MemorySet::from_elf 新建地址空间，用户栈，程序入口点</li>
<li>分配 pid 与内核栈</li>
<li>建立 TCB</li>
<li>加入父进程的子进程链表</li>
<li>准备 TrapContext</li>
<li>返回新子进程的TCB</li>
</ul>
</li>
</ul>
</li>
<li>完成系统调用功能<ul>
<li>sys_spawn</li>
</ul>
</li>
</ul>
<h3 id="实现-stride-调度算法"><a href="#实现-stride-调度算法" class="headerlink" title="实现 stride 调度算法"></a>实现 stride 调度算法</h3><ul>
<li>扩展 TCB<ul>
<li>stride</li>
<li>priority</li>
</ul>
</li>
<li>扩展 Task 公共接口<ul>
<li>set_priority</li>
</ul>
</li>
<li>修改 TaskManager 调度算法<ul>
<li>fetch 修改为 stride 调度算法</li>
</ul>
</li>
<li>完成系统调用功能<ul>
<li>sys_set_priority 调用 set_priority</li>
</ul>
</li>
</ul>
<h2 id="实验四内容总结"><a href="#实验四内容总结" class="headerlink" title="实验四内容总结"></a>实验四内容总结</h2><p>实现几个文件系统相关系统调用</p>
<h3 id="sys-linkat"><a href="#sys-linkat" class="headerlink" title="sys_linkat"></a>sys_linkat</h3><ul>
<li>给 File trait 增加 fstat 接口</li>
<li>扩展 efs 中 DiskInode 接口<ul>
<li>get_inode_id： get_disk_inode_pos的逆过程</li>
</ul>
</li>
<li>在 vfs 中 Inode 增加接口<ul>
<li>create_link<ul>
<li>新建目录项，(new_name, old_inode_id)</li>
</ul>
</li>
</ul>
</li>
<li>完成系统调用 sys_linkat</li>
</ul>
<h3 id="sys-unlinkat"><a href="#sys-unlinkat" class="headerlink" title="sys_unlinkat"></a>sys_unlinkat</h3><ul>
<li>给 File trait 增加 fstat 接口</li>
<li>扩展 efs 中 DiskInode 接口<ul>
<li>get_inode_id： get_disk_inode_pos的逆过程</li>
</ul>
</li>
<li>在 vfs 中 Inode 增加接口<ul>
<li>delete_link<ul>
<li>遍历目录下所有目录项，找到与对应文件名相同的inode</li>
<li>删除（清空）对应目录项</li>
</ul>
</li>
</ul>
</li>
<li>完成系统调用 sys_unlinkat</li>
</ul>
<h3 id="sys-stat"><a href="#sys-stat" class="headerlink" title="sys_stat"></a>sys_stat</h3><ul>
<li>给 File trait 增加 fstat 接口</li>
<li>扩展 efs 中 DiskInode 接口<ul>
<li>get_inode_id： get_disk_inode_pos的逆过程</li>
</ul>
</li>
<li>在 vfs 中 Inode 增加接口<ul>
<li>inode_id: 实现获取自身 inode id</li>
<li>isdir：判读是 inode 否为目录</li>
<li>linknum: 获取 root inode 下的某一个 inode id 对应的硬链接数量</li>
</ul>
</li>
<li>完成系统调用 sys_stat</li>
</ul>
<h2 id="实验五内容总结"><a href="#实验五内容总结" class="headerlink" title="实验五内容总结"></a>实验五内容总结</h2><p>本节主要几种同步原语与及其内核实现。</p>
<ul>
<li>加入死锁检测机制，实现银行家算法。</li>
<li>扩展 PCB 和 TCB<ul>
<li>可利用资源向量 分配矩阵 需求矩阵</li>
</ul>
</li>
<li>数据更新<ul>
<li>相关系统调用时进行更新数据</li>
</ul>
</li>
<li>检测算法<ul>
<li>获取资源前进行死锁检测</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://rcore-os.github.io/blog/2024/11/09/2024%E7%A7%8B%E5%86%AC%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93-yqhtz/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="rcore-os Group">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rcore-os Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2024/11/09/2024%E7%A7%8B%E5%86%AC%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93-yqhtz/" class="post-title-link" itemprop="url">2024秋冬开源操作系统训练营第一阶段总结-yqhtz</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-09 15:54:56" itemprop="dateCreated datePublished" datetime="2024-11-09T15:54:56+00:00">2024-11-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <hr>
<p>title: 2024秋冬开源操作系统第一阶段总结-yqthz<br>date: 2024-11-06 20:42:18<br>categories:</p>
<ul>
<li>report<br>tags:</li>
<li>author:yqthz</li>
</ul>
<hr>
<p>一直想学习Rust, 趁着这次训练营的机会, 开始了我的Rust学习, 初学Rust时, 就感觉Rust的设计十分现代, Rust的所有权机制让内存管理变得十分高效且安全, 减少了很多的内存问题, Rust的所有权、借用和生命周期模型可以在编译期防止常见的内存错误（如悬空指针、双重释放等），无需依赖垃圾回收器。</p>
<p>最初，我发现所有权模型与传统编程语言（如C++或Python）非常不同。理解所有权和借用规则如何影响变量的生命周期和作用域是一大挑战, 通过Rustlings的练习, 我逐渐掌握了Rust的语法和特性, 也感受到了Rust的魅力, 在编写Rust代码时，需要细致地思考数据的生命周期、所有权和借用，这培养了我编写安全代码的习惯。</p>
<p>Rust的学习让我认识到了一种与传统语言不同的编程思维模式，也让我理解了系统编程中的许多细节。虽然Rust的学习曲线相对较高，但它所带来的性能和安全性是非常值得的。我期待在未来的项目中更多地使用Rust, 充分返回Rust在内存安全和性能上的优势</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://rcore-os.github.io/blog/2024/11/09/2024%E7%A7%8B%E5%86%AC%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93-yqthz/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="rcore-os Group">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rcore-os Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2024/11/09/2024%E7%A7%8B%E5%86%AC%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93-yqthz/" class="post-title-link" itemprop="url">2024秋冬开源操作系统训练营第二阶段总结-yqthz</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-09 15:54:56" itemprop="dateCreated datePublished" datetime="2024-11-09T15:54:56+00:00">2024-11-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <hr>
<p>title: 2024秋冬开源操作系统第二阶段总结-yqthz<br>date: 2024-11-08 13:24:05<br>categories:</p>
<ul>
<li>report<br>tags:</li>
<li>author:yqthz</li>
</ul>
<hr>
<p>rcore的实验还是有一定难度的, 需要仔细阅读框架代码, 了解rcore的整体设计<br>lab1是实现sys_task_info系统调用, 比较简单<br>lab2是实现在启用虚拟地址的情况下重写sys_get_time和sys_task_info, 并实现sys_mmap和sys_munmpa系统调用, 难度较大, sys_get_time和sys_task_info仔细阅读sys_write的实现就可以完成, sys_mmap和sys_munmap做了一定简化, 在实现过程中需要对框架代码中的地址空间, 页表有较深的理解<br>lab3是实现sys_spawn和stride调度算法, 比较简单<br>lab4是实现硬链接和获取文件信息的系统调用, 难度较大, 也是我花费时间最多的一个lab, 需要仔细阅读框架代码中文件系统的实现, 需要对inode和disk_inode有较深的理解, 最开始尝试实现的时候, 卡在了如何读取disk_inode上,  后面又重新读了一遍框架代码, 一点点把文件系统的各个层次弄清楚, 最后成功完成了这个lab<br>lab5是实现死锁检测, 这个lab不需要阅读太多的框架代码, 只需要理解死锁检测算法即可, 难度一般, 最开始的实现的时候, need矩阵花费了我较多时间去理解, 在反复阅读测试用例和算法后, 我开始理解了这个算法, 最后成功实现了这个算法<br>最后, 非常感谢训练营将这么优质的内容开源, 同时提供了这么一个平台把大家聚集在了一起, 在与大家的交流和学习中, 我收获很多, 在阅读文档和框架代码的时候, 对os的许多概念有了实际上的理解</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/blog/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/47/">47</a><a class="extend next" rel="next" href="/blog/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



        </div>
        

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rcore-os Group</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/muse.js"></script>


<script src="/blog/js/next-boot.js"></script>


  















  

  

  

</body>
</html>
